<template>
  <div class="l-main">
    <div class="c-contents-cover c-contents-cover--main">
      <section id="top" class="c-contents c-contents--top js-contents">
        <div class="c-kv-slider-cover js-kv-slider-cover">
          <div class="c-kv-slider c-kv-slider--main is-active is-active-kv js-kv-slider">
            <div class="c-kv-slider__item">
              <div class="c-kv-slider__item__cage">
                <a href="/works/car-share/" class="c-kv-slider__link js-count-stop js-ajax-link">
                  <img src="~/assets/img/kv/car-share_img.png" alt="car share app" class="c-kv-slider__item__cage__img">
                </a>
                <img src="~/assets/img/kv/car-share.jpg" alt="car share" class="c-kv-slider__item__cage__img--kv">
              </div>
              <div class="c-kv-slider__item__cage__text">
                <p class="c-kv-slider__tag">UIUX DESIGN</p>
                <h2 class="c-kv-slider__title">CAR SHARE APP RENE<span>W</span>AL</h2>
                <p class="c-kv-slider__read">とあるカーシェアアプリのリニューアルデザイン案です。<br/>iOS&AndroidアプリUX設計、UIデザインを担当しました。</p>
                <a href="/works/car-share/" class="c-kv-slider__link js-count-stop js-ajax-link">READ MORE</a>
              </div>
              <img src="~/assets/img/kv/car-share.jpg" alt="car share" class="c-kv-slider__img">
            </div>
          </div>
          <div class="c-kv-slider c-kv-slider--main js-kv-slider">
            <div class="c-kv-slider__item">
              <div class="c-kv-slider__item__cage">
                <a href="/works/hakobiya/" class="c-kv-slider__link js-count-stop js-ajax-link">
                  <img src="~/assets/img/kv/hakobiya_img.png" alt="HAKOBIYA app" class="c-kv-slider__item__cage__img">
                </a>
              </div>
              <div class="c-kv-slider__item__cage__text">
                <p class="c-kv-slider__tag">UIUX DESIGN</p>
                <h2 class="c-kv-slider__title">HAKOBI<span>Y</span>A APP DESIGN</h2>
                <p class="c-kv-slider__read">「旅を仕事にしよう」というコンセプトを基に、海外旅行者と海外製品がほしい人をマッチングさせるアプリです。<br/>iOS&AndroidアプリUX設計、UIデザインを担当しました。</p>
                <a href="/works/hakobiya/" class="c-kv-slider__link js-count-stop js-ajax-link">READ MORE</a>
              </div>
              <img src="~/assets/img/kv/hakobiya.jpg" alt="HAKOBIYA" class="c-kv-slider__img">
            </div>
          </div>
          <div class="c-kv-slider c-kv-slider--main js-kv-slider">
            <div class="c-kv-slider__item">
              <div class="c-kv-slider__item__cage">
                <a href="/works/lunchiru/" class="c-kv-slider__link js-count-stop js-ajax-link">
                  <img src="~/assets/img/kv/lunchiru_img.png" alt="LUNCHIRU app" class="c-kv-slider__item__cage__img">
                </a>
              </div>
              <div class="c-kv-slider__item__cage__text">
                <p class="c-kv-slider__tag">UIUX DESIGN</p>
                <h2 class="c-kv-slider__title">LUNCHIRU APP DESIGN</h2>
                <p class="c-kv-slider__read">芦屋市との協働によるプロジェクトで、小中学校や保育所の給食の献立表が簡単に見れるアプリです。<br/>iOS&Androidアプリのロゴデザイン、UX設計、UIデザインを担当しました。</p>
                <a href="/works/lunchiru/" class="c-kv-slider__link js-count-stop js-ajax-link">READ MORE</a>
              </div>
              <img src="~/assets/img/kv/lunchiru.jpg" alt="LUNCHIRU" class="c-kv-slider__img">
            </div>
          </div>
          <div class="c-kv-slider c-kv-slider--main js-kv-slider">
            <div class="c-kv-slider__item">
              <div class="c-kv-slider__item__cage c-kv-slider__item__cage--no-app">
                <a href="/works/darkforce/" class="c-kv-slider__link js-count-stop js-ajax-link">
                  <img src="~/assets/img/works/darkforce/darkforce_item01.png" alt="DarkForce LOGO" class="c-kv-slider__item__cage__img">
                </a>
              </div>
              <div class="c-kv-slider__item__cage__text c-kv-slider__item__cage__text--no-app">
                <p class="c-kv-slider__tag">LOGO DESIGN</p>
                <h2 class="c-kv-slider__title">DARK FORCE</h2>
                <p class="c-kv-slider__read">自分が代表(？)をやっている、とあるゲームサークルのロゴを作成しました。<br/>ロゴデザイン・運営を担当しました。</p>
                <a href="/works/darkforce/" class="c-kv-slider__link js-count-stop js-ajax-link">READ MORE</a>
              </div>
              <img src="~/assets/img/kv/darkforce.png" alt="DarkForce" class="c-kv-slider__img">
            </div>
          </div>
          <div class="c-kv-slider c-kv-slider--main js-kv-slider">
            <div class="c-kv-slider__item">
              <div class="c-kv-slider__item__cage c-kv-slider__item__cage--no-app">
                <a href="/works/hakobiya-logo/" class="c-kv-slider__link js-count-stop js-ajax-link">
                  <img src="~/assets/img/kv/hakobiya-logo_img.png" alt="HAKOBIYA LOGO" class="c-kv-slider__item__cage__img">
                </a>
              </div>
              <div class="c-kv-slider__item__cage__text c-kv-slider__item__cage__text--no-app">
                <p class="c-kv-slider__tag">LOGO DESIGN</p>
                <h2 class="c-kv-slider__title">HAKOBIYA</h2>
                <p class="c-kv-slider__read">UIデザインも手がけたサービスのリニューアルロゴ案を作成しました。<br>HとAを使い、地球をモチーフにこのロゴを作成しました。</p>
                <a href="/works/hakobiya-logo/" class="c-kv-slider__link js-count-stop js-ajax-link">READ MORE</a>
              </div>
              <img src="~/assets/img/kv/hakobiya-logo.png" alt="HAKOBIYA" class="c-kv-slider__img">
            </div>
          </div>
        </div>
        <ul class="c-kv-slider-nav">
          <li class="c-kv-slider-nav__item is-active js-slider-nav"></li>
          <li class="c-kv-slider-nav__item js-slider-nav"></li>
          <li class="c-kv-slider-nav__item js-slider-nav"></li>
          <li class="c-kv-slider-nav__item js-slider-nav"></li>
          <li class="c-kv-slider-nav__item js-slider-nav"></li>
        </ul>
        <div class="c-kv-slider-pn">
          <span class="c-kv-slider-pn__item is-active js-slider-pn"></span>
          <span class="c-kv-slider-pn__item js-slider-pn"></span>
        </div>
      </section>
    </div>
  </div>
</template>

<script>
export default {
  //↓ES5までの記法
  data: function () {
    if (process.client) {
      var count = 0,
          $kvSlider = document.getElementsByClassName('js-kv-slider'),
          $slideNav = document.getElementsByClassName('js-slider-nav');

      const slideNav = Array.from(document.querySelectorAll(".js-slider-nav")),
            sliderPn = Array.from(document.querySelectorAll(".js-slider-pn"));

      function activeClassRemove() {
        for (var i = 0; i < $kvSlider.length; i++){
          $kvSlider[i].classList.remove("is-active","is-active-kv");
          $slideNav[i].classList.remove("is-active");
        }
      };

      function activeSlider(num) {
        $kvSlider[num].classList.add("is-active","is-active-kv");
        $slideNav[num].classList.add("is-active");
      }

      var indexGet = function(selector, target) {
        var nodeList = document.querySelectorAll(selector),
            element = document.querySelector(target);
        
        // 第2引数を省略したとき
        if (typeof target === 'undefined') {
          return Array.prototype.indexOf.call(nodeList[0].parentNode.children, nodeList[0]);
        }
        
        return Array.prototype.indexOf.call(nodeList, element);
      };

      sliderPn.forEach(span => {
        span.addEventListener("click", e => {
          var index = sliderPn.findIndex(list => list === e.target);
          var count = indexGet('.is-active-kv');

          activeClassRemove();

          if (index == 1) {
            if (count < 4) {
              count++;
            } else if(count == 4) {
              count = 0;
            }
          } else if(index == 0) {
            if (count > 0) {
              count--;
            } else if(count == 0) {
              count = 4;
            }
          }
          activeSlider(count);
        });
      });

      slideNav.forEach(span => {
        span.addEventListener("click", e => {
          var count = slideNav.findIndex(list => list === e.target);
          activeClassRemove();
          activeSlider(count);
        });
      });
    }
  }
}
</script>